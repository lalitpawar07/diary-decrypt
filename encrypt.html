<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simple Secret Diary</title>

<!-- CryptoJS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<!-- QR Generator -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background: linear-gradient(to right,#141e30,#243b55);
  font-family: Arial;
  color:white;
}

.container{
  width:90%;
  max-width:600px;
  display:flex;
  flex-direction:column;
}

textarea{
  height:200px;
  padding:10px;
  border-radius:10px;
  border:none;
  resize:none;
  font-size:16px;
  margin-bottom:10px;
}

input{
  padding:10px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
}

button{
  padding:10px;
  border:none;
  border-radius:10px;
  background:#ffcc70;
  cursor:pointer;
}

#qrcode{
  margin-top:20px;
  background:white;
  padding:15px;
  border-radius:10px;
  display:inline-block;
}
</style>
</head>

<body>

<div class="container">

<h2>üîê Write & Encrypt</h2>

<textarea id="text" placeholder="Write 4‚Äì5 paragraphs here..."></textarea>
<input type="password" id="password" placeholder="Enter Password">
<button onclick="encryptText()">Generate QR</button>

<div id="qrcode"></div>

</div>

<script>

function encryptText(){
    const text = document.getElementById("text").value;
    const password = document.getElementById("password").value;

    if(!text || !password){
        alert("Enter text and password");
        return;
    }

    // üî• Only store text
    const encrypted = CryptoJS.AES.encrypt(text, password).toString();

    const qrContainer = document.getElementById("qrcode");
    qrContainer.innerHTML = "";

    new QRCode(qrContainer, {
        text: encrypted,
        width: 400,   // üî• bigger QR
        height: 400,
        correctLevel: QRCode.CorrectLevel.L  // üî• lowest correction = max capacity
    });
}

</script>

</body>
</html>
