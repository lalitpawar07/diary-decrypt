<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Decrypt Diary</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background: linear-gradient(to right,#141e30,#243b55);
  font-family: Arial;
  color:white;
}

.container{
  width:90%;
  max-width:600px;
  display:flex;
  flex-direction:column;
}

textarea{
  height:120px;
  padding:10px;
  border-radius:10px;
  border:none;
  resize:none;
  margin-bottom:10px;
}

input{
  padding:10px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
}

button{
  padding:10px;
  border:none;
  border-radius:10px;
  background:#ffcc70;
  cursor:pointer;
}

#reader{
  margin-bottom:10px;
}

.result{
  margin-top:15px;
  background: rgba(0,0,0,0.5);
  padding:15px;
  border-radius:10px;
  white-space:pre-wrap;
}
</style>
</head>

<body>

<div class="container">

<h2>ðŸ”“ Decrypt</h2>

<button onclick="startScanner()">Scan QR</button>
<div id="reader"></div>

<textarea id="encryptedText" placeholder="Or paste encrypted text"></textarea>
<input type="password" id="password" placeholder="Enter Password">
<button onclick="decryptText()">Decrypt</button>

<div class="result" id="result"></div>

</div>

<script>

let html5QrCode;

function startScanner(){
    document.getElementById("reader").innerHTML="";
    html5QrCode = new Html5Qrcode("reader");

    html5QrCode.start(
        { facingMode: "environment" },
        { fps:10, qrbox:250 },
        function(decodedText){
            document.getElementById("encryptedText").value = decodedText;
            html5QrCode.stop();
        }
    );
}

function decryptText(){
    const encrypted = document.getElementById("encryptedText").value;
    const password = document.getElementById("password").value;

    if(!encrypted || !password){
        alert("Enter encrypted text and password");
        return;
    }

    try{
        const bytes = CryptoJS.AES.decrypt(encrypted, password);
        const decrypted = bytes.toString(CryptoJS.enc.Utf8);

        if(!decrypted) throw "error";

        document.getElementById("result").innerText = decrypted
